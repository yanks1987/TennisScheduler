{"ast":null,"code":"// Scheduler.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Scheduler=_ref=>{let{players}=_ref;const[selectedPlayerIndex,setSelectedPlayerIndex]=useState(0);useEffect(()=>{const lastIndex=localStorage.getItem('lastSelectedPlayerIndex');const lastSelectedDate=localStorage.getItem('lastSelectedDate');const currentDate=new Date().toISOString().split('T')[0];if(lastIndex!==null&&lastSelectedDate===currentDate){setSelectedPlayerIndex(parseInt(lastIndex,10));}else{const nextIndex=(selectedPlayerIndex+1)%players.length;setSelectedPlayerIndex(nextIndex);localStorage.setItem('lastSelectedPlayerIndex',nextIndex);localStorage.setItem('lastSelectedDate',currentDate);}},[]);const sendNotification=()=>{const currentPlayer=players[selectedPlayerIndex];const bookingUrl='https://cityofoakland.perfectmind.com/SocialSite/MemberRegistration/MemberSignIn';const message=`Hello ${currentPlayer.name}, please book the court at ${bookingUrl}`;const phoneNumbers=players.map(player=>player.phoneNumber);axios.post('http://localhost:5000/send-sms',{to:phoneNumbers,message:message}).then(response=>{if(response.data.success){alert('Notification sent successfully!');}else{alert('Failed to send notification: '+response.data.error);}}).catch(error=>{alert('Error sending notification: '+error.message);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tennis Scheduler\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Current Player: \",players[selectedPlayerIndex].name]}),/*#__PURE__*/_jsx(\"button\",{onClick:sendNotification,children:\"Notify Player to Book Court\"})]});};export default Scheduler;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Scheduler","_ref","players","selectedPlayerIndex","setSelectedPlayerIndex","lastIndex","localStorage","getItem","lastSelectedDate","currentDate","Date","toISOString","split","parseInt","nextIndex","length","setItem","sendNotification","currentPlayer","bookingUrl","message","name","phoneNumbers","map","player","phoneNumber","post","to","then","response","data","success","alert","error","catch","children","onClick"],"sources":["/Users/priyankashah/code/tennis-scheduler/src/components/Scheduler.js"],"sourcesContent":["// Scheduler.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst Scheduler = ({ players }) => {\n  const [selectedPlayerIndex, setSelectedPlayerIndex] = useState(0);\n\n  useEffect(() => {\n    const lastIndex = localStorage.getItem('lastSelectedPlayerIndex');\n    const lastSelectedDate = localStorage.getItem('lastSelectedDate');\n    const currentDate = new Date().toISOString().split('T')[0];\n\n    if (lastIndex !== null && lastSelectedDate === currentDate) {\n      setSelectedPlayerIndex(parseInt(lastIndex, 10));\n    } else {\n      const nextIndex = (selectedPlayerIndex + 1) % players.length;\n      setSelectedPlayerIndex(nextIndex);\n      localStorage.setItem('lastSelectedPlayerIndex', nextIndex);\n      localStorage.setItem('lastSelectedDate', currentDate);\n    }\n  }, []);\n\n  const sendNotification = () => {\n    const currentPlayer = players[selectedPlayerIndex];\n    const bookingUrl = 'https://cityofoakland.perfectmind.com/SocialSite/MemberRegistration/MemberSignIn';\n    const message = `Hello ${currentPlayer.name}, please book the court at ${bookingUrl}`;\n\n    const phoneNumbers = players.map(player => player.phoneNumber);\n\n    axios.post('http://localhost:5000/send-sms', {\n      to: phoneNumbers,\n      message: message\n    })\n    .then(response => {\n      if (response.data.success) {\n        alert('Notification sent successfully!');\n      } else {\n        alert('Failed to send notification: ' + response.data.error);\n      }\n    })\n    .catch(error => {\n      alert('Error sending notification: ' + error.message);\n    });\n  };\n\n  return (\n    <div>\n      <h1>Tennis Scheduler</h1>\n      <p>Current Player: {players[selectedPlayerIndex].name}</p>\n      <button onClick={sendNotification}>Notify Player to Book Court</button>\n    </div>\n  );\n};\n\nexport default Scheduler;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,SAAS,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAC5B,KAAM,CAACE,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAEjEC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,yBAAyB,CAAC,CACjE,KAAM,CAAAC,gBAAgB,CAAGF,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CACjE,KAAM,CAAAE,WAAW,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAE1D,GAAIP,SAAS,GAAK,IAAI,EAAIG,gBAAgB,GAAKC,WAAW,CAAE,CAC1DL,sBAAsB,CAACS,QAAQ,CAACR,SAAS,CAAE,EAAE,CAAC,CAAC,CACjD,CAAC,IAAM,CACL,KAAM,CAAAS,SAAS,CAAG,CAACX,mBAAmB,CAAG,CAAC,EAAID,OAAO,CAACa,MAAM,CAC5DX,sBAAsB,CAACU,SAAS,CAAC,CACjCR,YAAY,CAACU,OAAO,CAAC,yBAAyB,CAAEF,SAAS,CAAC,CAC1DR,YAAY,CAACU,OAAO,CAAC,kBAAkB,CAAEP,WAAW,CAAC,CACvD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,aAAa,CAAGhB,OAAO,CAACC,mBAAmB,CAAC,CAClD,KAAM,CAAAgB,UAAU,CAAG,kFAAkF,CACrG,KAAM,CAAAC,OAAO,CAAG,SAASF,aAAa,CAACG,IAAI,8BAA8BF,UAAU,EAAE,CAErF,KAAM,CAAAG,YAAY,CAAGpB,OAAO,CAACqB,GAAG,CAACC,MAAM,EAAIA,MAAM,CAACC,WAAW,CAAC,CAE9D9B,KAAK,CAAC+B,IAAI,CAAC,gCAAgC,CAAE,CAC3CC,EAAE,CAAEL,YAAY,CAChBF,OAAO,CAAEA,OACX,CAAC,CAAC,CACDQ,IAAI,CAACC,QAAQ,EAAI,CAChB,GAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAE,CACzBC,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CAAC,IAAM,CACLA,KAAK,CAAC,+BAA+B,CAAGH,QAAQ,CAACC,IAAI,CAACG,KAAK,CAAC,CAC9D,CACF,CAAC,CAAC,CACDC,KAAK,CAACD,KAAK,EAAI,CACdD,KAAK,CAAC,8BAA8B,CAAGC,KAAK,CAACb,OAAO,CAAC,CACvD,CAAC,CAAC,CACJ,CAAC,CAED,mBACErB,KAAA,QAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBpC,KAAA,MAAAoC,QAAA,EAAG,kBAAgB,CAACjC,OAAO,CAACC,mBAAmB,CAAC,CAACkB,IAAI,EAAI,CAAC,cAC1DxB,IAAA,WAAQuC,OAAO,CAAEnB,gBAAiB,CAAAkB,QAAA,CAAC,6BAA2B,CAAQ,CAAC,EACpE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}